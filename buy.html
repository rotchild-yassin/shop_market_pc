<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PC Market - Boutique</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="buy.css">
  

</head>
<body>

<!-- Header -->
<header class="header">
<div class="container">
<div class="row align-items-center g-3">
<div class="col-6 col-md-2">
<img src="logo-pcmarket-200.jpg" alt="PC Market" class="logo">
</div>
<div class="col-12 col-md-6">
<div class="search-box">
<div class="input-group">
<input type="search" class="form-control" placeholder="Rechercher un produit...">
<button class="btn btn-light"><i class="bi bi-search"></i></button>
</div>
</div>
</div>
<div class="col-6 col-md-4">
<div class="header-icons d-flex justify-content-end gap-3">
<a href="#" class="text-center" id="accountBtn">
<i class="bi bi-person-circle"></i>
<small>Compte</small>
</a>
<a onclick="openCart()" class="text-center">
<i class="bi bi-bag-check"></i>
<small>Panier (<span id="headerCartCount">0</span>)</small>
</a>
</div>
</div>
</div>
</div>
</header>

<!-- Carousel -->
<div id="heroCarousel" class="carousel slide hero-carousel" data-bs-ride="carousel">
  <div class="carousel-indicators">
    <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="0" class="active"></button>
    <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="1"></button>
    <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="2"></button>
  </div>
  <div class="carousel-inner">
    <div class="carousel-item active" style="background-image: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('https://images.unsplash.com/photo-1593642634315-48f5414c3ad9?w=1600');">
      <div class="carousel-caption">
        <h1>Les Spécialistes du <span>Gaming</span> en Tunisie</h1>
      </div>
    </div>
    <div class="carousel-item" style="background-image: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('https://images.unsplash.com/photo-1587202372634-32705e3bf49c?w=1600');">
      <div class="carousel-caption">
        <h1>PC Gamer <span>Haut de Gamme</span> au Meilleur Prix</h1>
      </div>
    </div>
    <div class="carousel-item" style="background-image: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('https://images.unsplash.com/photo-1593640408182-31c70c8268f5?w=1600');">
      <div class="carousel-caption">
        <h1><span>Vente PC</span> Sur Mesure en Tunisie</h1>
      </div>
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
    <span class="carousel-control-prev-icon"></span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
    <span class="carousel-control-next-icon"></span>
  </button>
</div>

<!-- Products Section -->
<section class="products-section">
  <div class="container">
    <h2 class="section-title">Nos Produits</h2>
    <div class="products-grid" id="productsGrid"></div>
  </div>
</section>

<!-- Cart Modal -->
<div class="cart-modal" id="cartModal" onclick="closeCartIfOutside(event)">
  <div class="cart-panel" onclick="event.stopPropagation()">
    <div class="cart-header">
      <h2>Mon Panier</h2>
      <button class="close-cart" onclick="closeCart()">&times;</button>
    </div>
    <div class="cart-items" id="cartItemsContainer"></div>
    <div class="cart-footer">
      <div class="cart-total"><span>Total:</span><span id="cartTotal">0 $</span></div>
      <button class="checkout-btn" onclick="checkout()"><i class="bi bi-credit-card"></i> Passer la commande</button>
    </div>
  </div>
</div>

<!-- Floating Cart Button -->
<div class="cart-float">
  <button class="cart-float-btn" onclick="openCart()">
    <i class="bi bi-bag-check"></i>
    <span class="cart-badge" id="cartCount">0</span>
  </button>
</div>

<!-- Profile Modal -->
<div class="cart-modal" id="profileModal" onclick="closeProfileIfOutside(event)">
  <div class="cart-panel" style="max-width: 400px;" onclick="event.stopPropagation()">
    <div class="cart-header" style="background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);">
      <h2>Mon Profil</h2>
      <button class="close-cart" onclick="closeProfile()">&times;</button>
    </div>
    <div class="cart-items" id="profileContainer" style="flex-direction: column; padding: 2rem;"></div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>


</body>
</html>
<script>
  // ------ Products ------
const products=[
  {
    id:1,
    name:"Windows 12 Pro",
    specs:"Intel Core i9 • 512GB SSD • 32GB RAM • AI",
    price:2500,
    image:"https://images.unsplash.com/photo-1587202372634-32705e3bf49c?w=400"
  },
  {
    id:2,
    name:"Lenovo Yoga Slim 7",
    specs:"Intel Core i7 • 512GB SSD • 16GB RAM",
    price:1655,
    image:"https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=400"
  },
  {
    id:3,
    name:"HP Spectre x360",
    specs:"Intel Core i7 • 512GB SSD • 24GB RAM",
    price:1750,
    image:"https://images.unsplash.com/photo-1593642632823-8f785ba67e45?w=400"
  },
  {
    id:4,
    name:"Windows 10 Pro",
    specs:"Intel Core i5 • 256GB SSD • 16GB RAM • AI",
    price:1000,
    image:"https://images.unsplash.com/photo-1593642634443-44adaa06623a?w=400"
  },
  {
    id:5,
    name:"ASUS ROG Gaming",
    specs:"Ryzen 7 • 512GB SSD • 32GB RAM • RTX 3060",
    price:2500,
    image:"https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=400"
  },
  {
    id:6,
    name:"ASUS ROG Strix G16",
    specs:"Intel i9 14Gen • 1TB SSD • 16GB RAM",
    price:2500,
    image:"https://images.unsplash.com/photo-1588872657578-7efd1f1555ed?w=400"
  },
  {
    id:7,
    name:"MSI Thin GF63",
    specs:"Intel i5 12Gen • 512GB SSD • 16GB • RTX 2050",
    price:1800,
    image:"https://images.unsplash.com/photo-1525547719571-a2d4ac8945e2?w=400"
  },
  {
    id:8,
    name:"Gaming Laptop Pro",
    specs:"Intel Core i7 • 512GB SSD • 32GB RAM • AI",
    price:2200,
    image:"https://images.unsplash.com/photo-1591799264318-7e6ef8ddb7ea?w=400"
  },
  {
    id:9,
    name:"Windows 12 Ultimate",
    specs:"Intel Core i9 • 1TB SSD • 64GB RAM • AI",
    price:3000,
    image:"https://images.unsplash.com/photo-1587202372775-e229f172b9d7?w=400"
  }
];

let cart=[];

// ---- Render Products ----
function renderProducts(){
  const grid=document.getElementById('productsGrid');
  products.forEach(product=>{
    const card=document.createElement('div');
    card.className='product-card';
    card.innerHTML=`<img src="${product.image}" alt="${product.name}" class="product-image"><div class="product-info"><h3 class="product-name">${product.name}</h3><p class="product-specs">${product.specs}</p><div class="product-price" id="price-${product.id}">${product.price} $</div><div class="quantity-controls"><button class="quantity-btn" onclick="decreaseQuantity(${product.id})">-</button><input type="number" class="quantity-input" id="qty-${product.id}" value="1" min="1" max="10" readonly><button class="quantity-btn" onclick="increaseQuantity(${product.id})">+</button></div><button class="add-to-cart-btn" onclick="addToCart(${product.id})"><i class="bi bi-cart-plus"></i> Ajouter au panier</button></div>`;
    grid.appendChild(card);
  });
}

// ---- Quantity ----
function increaseQuantity(id){
  const qty=document.getElementById(`qty-${id}`);
  const priceEl=document.getElementById(`price-${id}`);
  const product=products.find(p=>p.id===id);
  let q=parseInt(qty.value);
  if(q<10){
    q++;qty.value=q;
    priceEl.textContent=`${product.price*q} $`
  }
}
function decreaseQuantity(id){
  const qty=document.getElementById(`qty-${id}`);
  const priceEl=document.getElementById(`price-${id}`);
  const product=products.find(p=>p.id===id);
  let q=parseInt(qty.value);
  if(q>1){
    q--;
    qty.value=q;
    priceEl.textContent=`${product.price*q} $`
  }
}
function addToCart(id){
  const product=products.find(p=>p.id===id);
  const qty=parseInt(document.getElementById(`qty-${id}`).value);
  const existing=cart.find(item=>item.id===id);
  if(existing){
    existing.quantity+=qty;
  }
  else{
    cart.push({...product, quantity: qty});
  }
  updateCartUI();
  document.getElementById(`qty-${id}`).value=1;
  document.getElementById(`price-${id}`).textContent=`${product.price} $`;
  alert(`${product.name} (x${qty}) ajouté au panier!`);
}

// ---- Cart ----
function updateCartUI(){
  const cartCount=cart.reduce((sum,item)=>sum+item.quantity,0);
  document.getElementById('cartCount').textContent=cartCount;
  document.getElementById('headerCartCount').textContent=cartCount;
  renderCartItems();
}
function renderCartItems(){
  const container=document.getElementById('cartItemsContainer');
  if(cart.length===0){
    container.innerHTML=`<div class="cart-empty"><i class="bi bi-cart-x"></i><p>Votre panier est vide</p></div>`;
    document.getElementById('cartTotal').textContent='0 $';
    return;
  }
  container.innerHTML='';
  let total=0;
  cart.forEach((item,index)=>{
    const itemTotal=item.price*item.quantity;total+=itemTotal;
    const cartItem=document.createElement('div');
    cartItem.className='cart-item';
    cartItem.innerHTML=`<img src="${item.image}" alt="${item.name}"class="cart-item-image"><div class="cart-item-info"><div class="cart-item-name">${item.name}</div><div class="cart-item-specs">${item.specs}</div><div class="cart-item-details"><span class="cart-item-quantity">Quantité: ${item.quantity}</span><span class="cart-item-price">${itemTotal} $</span></div><button class="delete-btn" onclick="removeFromCart(${index})"><i class="bi bi-trash"></i> Supprimer</button></div>`;
    container.appendChild(cartItem);
  });
  document.getElementById('cartTotal').textContent=`${total} $`;
}
function removeFromCart(index){
  cart.splice(index,1);
  updateCartUI();
}
function openCart(){
  document.getElementById('cartModal').classList.add('show');
}
function closeCart(){
  document.getElementById('cartModal').classList.remove('show');
}
function closeCartIfOutside(e){
  if(e.target.id==='cartModal'){
    closeCart();
  }
}
function checkout(){
  if(cart.length===0){
    alert('Votre panier est vide!');
    return;
  }
  const total=cart.reduce((sum,item)=>sum+(item.price*item.quantity),0);
  alert(`Commande confirmée!\nTotal: ${total} $\n\nMerci pour votre achat!`);
  cart=[];
  updateCartUI();
  closeCart();
}

// ---- Profile (Fix CORS by using LocalStorage) ----
const accountBtn=document.getElementById('accountBtn');
accountBtn.addEventListener('click',()=>{
  const user=JSON.parse(localStorage.getItem('currentUser'));
if(user){
  const container=document.getElementById('profileContainer');
  container.innerHTML=`<div style="text-align:center;margin-bottom:1rem;"><i class="bi bi-person-circle" style="font-size:4rem;color:#667eea;"></i></div><p><strong>Nom:</strong> ${user.lastName}</p><p><strong>Prénom:</strong> ${user.firstName}</p><p><strong>Email:</strong> ${user.email}</p><p><strong>Téléphone:</strong> ${user.phone}</p><button class="checkout-btn" onclick="closeProfile()" style="margin-top:1rem;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);">Fermer</button>`;document.getElementById('profileModal').classList.add('show');}else{alert('Utilisateur non connecté!');}});
  function closeProfile(){
    document.getElementById('profileModal').classList.remove('show');
  }
  function closeProfileIfOutside(e){
    if(e.target.id==='profileModal')closeProfile();
  }

// ---- Init ----
renderProducts();
</script>